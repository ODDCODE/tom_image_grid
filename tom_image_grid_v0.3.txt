# Name: tom_image_grid v0.3 
# Type: Admin plugin
# An optionnal grid display for images tab
# Author: Thomas Jund
# URL: http://sacripant.fr
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxNTp7czo0OiJuYW1lIjtzOjE0OiJ0b21faW1hZ2VfZ3JpZCI7czo3OiJ2ZXJzaW9uIjtz
OjM6IjAuMyI7czo4OiJyZXZpc2lvbiI7czowOiIiO3M6NjoiYXV0aG9yIjtzOjExOiJUaG9t
YXMgSnVuZCI7czoxMDoiYXV0aG9yX3VyaSI7czoxOToiaHR0cDovL3NhY3JpcGFudC5mciI7
czoxMToiZGVzY3JpcHRpb24iO3M6NDA6IkFuIG9wdGlvbm5hbCBncmlkIGRpc3BsYXkgZm9y
IGltYWdlcyB0YWIiO3M6NToib3JkZXIiO3M6MToiNSI7czo0OiJ0eXBlIjtzOjE6IjMiO3M6
NToiZmxhZ3MiO3M6MDoiIjtzOjg6InRleHRwYWNrIjtzOjA6IiI7czoxMDoibG9hZF9vcmRl
ciI7czoxOiI1IjtzOjQ6ImhlbHAiO3M6MjE3MToiCTxoMT50b21faW1hZ2VfZ3JpZCAwLjM8
L2gxPgoKCTxwPjxlbT50b21faW1hZ2VfZ3JpZDwvZW0+IGlzIGEgcGx1Z2luIGZvciA8YSBo
cmVmPSJodHRwOi8vbG9jYWxob3N0L3RleHRwYXR0ZXJuLTQuNS41L3RleHRwYXR0ZXJuIj5U
ZXh0cGF0dGVybiA0LjUuKiA8c3BhbiBjbGFzcz0iY2FwcyI+Q01TPC9zcGFuPjwvYT4uIEl0
IGFsbG93cyBhIG1vcmUgY29tcGFjdCBkaXNwbGF5IChhcyBhIGdyaWQpIG9mIHRoZSBpbWFn
ZXMgbGlzdC48L3A+CgoJPHA+VGhlIHBsdWdpbiBhZGRzIHR3byBidXR0b25zPGJyIC8+Cjxp
bWcgc3JjPSJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBp
TVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NEtQQ0ZFVDBOVVdWQkZJSE4yWnlCUVZV
Sk1TVU1nSWkwdkwxY3pReTh2UkZSRUlGTldSeUF4TGpFdkwwVk9JaUFpYUhSMGNEb3ZMM2Qz
ZHk1M015NXZjbWN2UjNKaGNHaHBZM012VTFaSEx6RXVNUzlFVkVRdmMzWm5NVEV1WkhSa0lq
NEtQSE4yWnlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6
TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6
TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWlCM2FXUjBhRDBp
TWpCd2VDSUtDU0JvWldsbmFIUTlJakl3Y0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TUNBeU1D
SWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNakFnTWpBaUlIaHRiRHB6
Y0dGalpUMGljSEpsYzJWeWRtVWlQZ284WnlCcFpEMGlaM0pwWkNJK0NnazhaejRLQ1FrOGNt
VmpkQ0I0UFNJeklpQjVQU0l6SWlCM2FXUjBhRDBpTlM0Mk1ERWlJR2hsYVdkb2REMGlOUzQy
SWk4K0Nna0pQSEpsWTNRZ2VEMGlNeUlnZVQwaU1URXVNems1SWlCM2FXUjBhRDBpTlM0Mk1E
RWlJR2hsYVdkb2REMGlOUzQyTURFaUx6NEtDUWs4Y21WamRDQjRQU0l4TVM0ek9Ua2lJSGs5
SWpFeExqTTVPU0lnZDJsa2RHZzlJalV1TmpBeElpQm9aV2xuYUhROUlqVXVOakF4SWk4K0Nn
a0pQSEpsWTNRZ2VEMGlNVEV1TXprNUlpQjVQU0l6SWlCM2FXUjBhRDBpTlM0Mk1ERWlJR2hs
YVdkb2REMGlOUzQySWk4K0NnazhMMmMrQ2p3dlp6NEtQQzl6ZG1jK0NnPT0iIGFsdD0iIiAv
PiA8aW1nIHNyYz0iZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2
YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENGRVQwTlVXVkJGSUhOMlp5
QlFWVUpNU1VNZ0lpMHZMMWN6UXk4dlJGUkVJRk5XUnlBeExqRXZMMFZPSWlBaWFIUjBjRG92
TDNkM2R5NTNNeTV2Y21jdlIzSmhjR2hwWTNNdlUxWkhMekV1TVM5RVZFUXZjM1puTVRFdVpI
UmtJajRLUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2Qz
TG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2Qz
Y3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElpQjNhV1Iw
YUQwaU1qQndlQ0lLQ1NCb1pXbG5hSFE5SWpJd2NIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU1D
QXlNQ0lnWlc1aFlteGxMV0poWTJ0bmNtOTFibVE5SW01bGR5QXdJREFnTWpBZ01qQWlJSGh0
YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpUGdvOFp5QnBaRDBpYkdsdVpTSStDZ2s4Y0dGMGFD
QmtQU0pOTXk0NE1URXNNVFF1TVRBM2RqSXVPRGc1U0RBdU9EUTBkaTB5TGpnNE9VZ3pMamd4
TVhvZ1RUQXVPRFEwTERndU5UVTFkakl1T0RnMmFESXVPVFkzVmpndU5UVTFTREF1T0RRMGVp
Qk5NVGt1TVRVMUxERXhMalEwTVZZNExqVTFOVWcyTGpFMk9YWXlMamc0TmtneE9TNHhOVFY2
Q2drSklFMHhPUzR4TlRVc01UWXVPVGsyZGkweUxqZzRPVWcyTGpFMk9YWXlMamc0T1VneE9T
NHhOVFY2SUUwd0xqZzBOQ3d6ZGpJdU9EZzVhREl1T1RZM1ZqTklNQzQ0TkRSNklFMHhPUzR4
TlRVc05TNDRPRGxXTTBnMkxqRTJPWFl5TGpnNE9VZ3hPUzR4TlRWNklpOCtDand2Wno0S1BD
OXpkbWMrQ2c9PSIgYWx0PSIiIC8+PGJyIC8+CmluIHRoZSBJbWFnZSBUYWIgb2YgeW91ciBi
YWNrLW9mZmljZSBhbGxvd2luZyB5b3UgdG8gc3dpdGNoIGZyb20gdGhlIHN0YW5kYXJkIGRp
c3BsYXkgdG8gYSBtb3JlIGNvbXBhY3QgZ3JpZCBkaXNwbGF5LjwvcD4iO3M6MzoiY3NzIjtz
OjA6IiI7czo0OiJjb2RlIjtzOjY2MTc6ImlmIChAdHhwaW50ZXJmYWNlID09ICdhZG1pbicp
IHsKCXJlZ2lzdGVyX2NhbGxiYWNrKCAndG9tX2ltYWdlX2dyaWRfbWFya3VwJywgJ2ltYWdl
X3VpJywgJ2V4dGVuZF9jb250cm9scycpOwoJcmVnaXN0ZXJfY2FsbGJhY2soICd0b21faW1h
Z2VfZ3JpZF9jc3MnLCAiaW1hZ2UiKTsKCXJlZ2lzdGVyX2NhbGxiYWNrKCAndG9tX2ltYWdl
X2dyaWRfanMnLCAiaW1hZ2UiKTsKfQoKZnVuY3Rpb24gdG9tX2ltYWdlX2dyaWRfbWFya3Vw
KCkKewogICAgICAgICRvdXQgPSA8PDxIVE1MCgo8Zm9ybSBpZD0idG9tX2lnX29wdGlvbnMi
PgogICAgPGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idG9tX2lnX29wdGlvbiIg
aWQ9InRvbV9pZ19vcHRpb24tLWdyaWQiIC8+PHNwYW4gY2xhc3M9InRvbV9pZ19pY29uLWdy
aWQiPkdyaWQ8L3NwYW4+PC9sYWJlbD4KICAgIDxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8i
IG5hbWU9InRvbV9pZ19vcHRpb24iIGlkPSJ0b21faWdfb3B0aW9uLS1saW5lIiAvPjxzcGFu
IGNsYXNzPSJ0b21faWdfaWNvbi1saW5lIj5MaW5lPC9zcGFuPjwvbGFiZWw+CjwvZm9ybT4K
SFRNTDsKCWVjaG8gJG91dDsKfQoKZnVuY3Rpb24gdG9tX2ltYWdlX2dyaWRfY3NzKCkKewog
ICAgICAgICRzb3J0YnkgPSBnVHh0KCdzb3J0X2J5Jyk7CiAgICAgICAgJG91dCA9IDw8PENT
UwoKPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KLyoKKiogQ1NTIGZvciB0b21faW1hZ2VfZ3Jp
ZCBwbHVnaW4KKiogQnkgU2FjcmlwYW50IOKAlCBUaG9tYXMgSnVuZAoqKiBodHRwOi8vc2Fj
cmlwYW50LmZyCiovCgoudG9tX2lnIC50eHAtbGlzdCAqIHsKICAgIC1tb3otYm94LXNpemlu
ZzogYm9yZGVyLWJveDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLnRvbV9pZyAu
dHhwLWxpc3R0YWJsZXMgewogICAgZGlzcGxheTogYmxvY2s7Cn0KCi50b21faWcjcGFnZS1p
bWFnZSAudHhwLWxpc3QgdGhlYWQgdGggewogICAgLypkaXNwbGF5OiBub25lOyovCiAgICBk
aXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB3aWR0
aDogYXV0bzsKCn0KLnRvbV9pZyNwYWdlLWltYWdlIC50eHAtbGlzdCB0aGVhZCB0aC5pbWFn
ZXNfZGV0YWlsIHsKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQoudG9tX2lnI3Bh
Z2UtaW1hZ2UgLnR4cC1saXN0IHRoZWFkIHRoLm11bHRpLWVkaXQgewogICAgbWFyZ2luLXJp
Z2h0OiAxZW07Cn0KLnRvbV9pZyNwYWdlLWltYWdlIC50eHAtbGlzdCB0aGVhZCB0aC5tdWx0
aS1lZGl0OmFmdGVyIHsKICAgIGNvbnRlbnQ6IGF0dHIodGl0bGUpOwp9CgoudG9tX2lnI3Bh
Z2UtaW1hZ2UgLnR4cC1saXN0IHRoZWFkIHRoLmlkIHsKICAgIG1hcmdpbi1sZWZ0OiAzLjZl
bTsKfQoudG9tX2lnI3BhZ2UtaW1hZ2UgLnR4cC1saXN0IHRoZWFkIHRoLmlkOmJlZm9yZSB7
CiAgICBjb250ZW50OiAiU29ydCBieSI7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBhZGRp
bmc6IGluaGVyaXQ7CiAgICBwYWRkaW5nLWxlZnQ6IDA7CiAgICBwYWRkaW5nLXJpZ2h0OiAu
MzNlbTsKCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB3aWR0aDogMy42ZW07CiAgICBy
aWdodDogMTAwJTsKICAgIHRvcDogMDsKCiAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgIGZv
bnQtd2VpZ2h0OiBub3JtYWw7Cn0KCgoudG9tX2lnI3BhZ2UtaW1hZ2UgLnR4cC1saXN0IHRi
b2R5IHRyIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIC8qdmVydGljYWwtYWxp
Z246IG1pZDsqLwogICAgd2lkdGg6IDE1ZW07CiAgICBtYXJnaW46IC42NmVtIDFlbSAwIDAK
fQoKLnRvbV9pZyNwYWdlLWltYWdlIC50eHAtbGlzdCB0ZCB7CiAgICBkaXNwbGF5OiBibG9j
azsKICAgIHBhZGRpbmc6IDAuMTZlbSAwLjMzZW07CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxp
cHNpczsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9
CgoudG9tX2lnI3BhZ2UtaW1hZ2UgLnR4cC1saXN0IHRkLm11bHRpLWVkaXQgewogICAgZmxv
YXQ6IHJpZ2h0OwogICAgd2lkdGg6IGF1dG87Cn0KLnRvbV9pZyNwYWdlLWltYWdlIC50eHAt
bGlzdCB0ZC5tdWx0aS1lZGl0IGlucHV0IHsKICAgIG1hcmdpbi1ib3R0b206IDA7Cn0KCi50
b21faWcjcGFnZS1pbWFnZSAudHhwLWxpc3QgdGQudGh1bWJuYWlsIHsKICAgIGhlaWdodDog
MTJlbTsKfQoKLnRvbV9pZyNwYWdlLWltYWdlIC50eHAtbGlzdCB0ZC50aHVtYm5haWwgaW1n
IHsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIG1heC1oZWlnaHQ6IDEwMCU7CiAgICBoZWln
aHQ6IGF1dG87CiAgICB3aWR0aDogYXV0bzsKfQoKLyogTm8gdGh1bWJuYWlsIGRpc3BsYXkg
Ki8KLnRvbV9pZyAudG9tX2lnLS1ub1RodW1iIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAg
YmFja2dyb3VuZC1jb2xvcjogI2VlZTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKCiAgICBo
ZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogMTAwJTsKICAgIGJvcmRlci13aWR0aDogNS4yNWVt
IDUuNWVtOwogICAgYm9yZGVyLXN0eWxlOiBzb2xpZDsKICAgIGJvcmRlci10b3AtY29sb3I6
ICNlZWU7CiAgICBib3JkZXItYm90dG9tLWNvbG9yOiAjZWVlOwogICAgYm9yZGVyLWxlZnQt
Y29sb3I6ICNkZGQ7CiAgICBib3JkZXItcmlnaHQtY29sb3I6ICNkZGQ7Cn0KCgoKQG1lZGlh
IG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0ODBweCkgewogICAgLnRvbV9pZyNwYWdl
LWltYWdlIC50eHAtbGlzdCB0Ym9keSB0ciB7CiAgICAgICAgd2lkdGg6IDE0MHB4OwogICAg
ICAgIG1hcmdpbjogLjY2ZW0gLjMzZW0gMCAwOwogICAgfQoKICAgIC50b21faWcjcGFnZS1p
bWFnZSAudHhwLWxpc3QgdGQudGh1bWJuYWlsIHsKICAgICAgICBoZWlnaHQ6IDExMnB4Owog
ICAgfQoKICAgIC50b21faWcgLnRvbV9pZy0tbm9UaHVtYiB7CiAgICAgICAgYm9yZGVyLXdp
ZHRoOiA0NXB4IDQwcHg7CiAgICB9CgoKfQoKLypidXR0b25zCi0tLS0tLS0tLS0qLwoKI3Rv
bV9pZ19vcHRpb25zIGlucHV0IHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KCiN0b21faWdfb3B0
aW9ucyBsYWJlbCB7CiAgICBwYWRkaW5nOiAuMTZlbTsKICAgIGRpc3BsYXk6IGlubGluZS1i
bG9jazsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgd2lkdGg6IDIw
cHg7CiAgICBoZWlnaHQ6IDIwcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9CiN0b21faWdf
b3B0aW9ucyBsYWJlbC5zZWxlY3RlZCB7CiAgICBib3JkZXItY29sb3I6ICNhYWE7Cn0KLnRv
bV9pZ19pY29uLWdyaWQ6YmVmb3JlIHsKICAgIGNvbnRlbnQ6IHVybCgiZGF0YTppbWFnZS9z
dmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBp
ZFhSbUxUZ2lQejRLUENGRVQwTlVXVkJGSUhOMlp5QlFWVUpNU1VNZ0lpMHZMMWN6UXk4dlJG
UkVJRk5XUnlBeExqRXZMMFZPSWlBaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdlIzSmhjR2hw
WTNNdlUxWkhMekV1TVM5RVZFUXZjM1puTVRFdVpIUmtJajRLUEhOMlp5QjJaWEp6YVc5dVBT
SXhMakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUln
ZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJt
c2lJSGc5SWpCd2VDSWdlVDBpTUhCNElpQjNhV1IwYUQwaU1qQndlQ0lLQ1NCb1pXbG5hSFE5
SWpJd2NIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBeU1DQXlNQ0lnWlc1aFlteGxMV0poWTJ0bmNt
OTFibVE5SW01bGR5QXdJREFnTWpBZ01qQWlJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVp
UGdvOFp5QnBaRDBpWjNKcFpDSStDZ2s4Wno0S0NRazhjbVZqZENCNFBTSXpJaUI1UFNJeklp
QjNhV1IwYUQwaU5TNDJNREVpSUdobGFXZG9kRDBpTlM0MklpOCtDZ2tKUEhKbFkzUWdlRDBp
TXlJZ2VUMGlNVEV1TXprNUlpQjNhV1IwYUQwaU5TNDJNREVpSUdobGFXZG9kRDBpTlM0Mk1E
RWlMejRLQ1FrOGNtVmpkQ0I0UFNJeE1TNHpPVGtpSUhrOUlqRXhMak01T1NJZ2QybGtkR2c5
SWpVdU5qQXhJaUJvWldsbmFIUTlJalV1TmpBeElpOCtDZ2tKUEhKbFkzUWdlRDBpTVRFdU16
azVJaUI1UFNJeklpQjNhV1IwYUQwaU5TNDJNREVpSUdobGFXZG9kRDBpTlM0MklpOCtDZ2s4
TDJjK0Nqd3ZaejRLUEM5emRtYytDZz09Iik7Cn0KLnRvbV9pZ19pY29uLWxpbmU6YmVmb3Jl
IHsKICAgIGNvbnRlbnQ6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3
Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejRLUENGRVQwTlVX
VkJGSUhOMlp5QlFWVUpNU1VNZ0lpMHZMMWN6UXk4dlJGUkVJRk5XUnlBeExqRXZMMFZPSWlB
aWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdlIzSmhjR2hwWTNNdlUxWkhMekV1TVM5RVZFUXZj
M1puTVRFdVpIUmtJajRLUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUhodGJHNXpQU0pvZEhS
d09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBk
SEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhC
NElpQjNhV1IwYUQwaU1qQndlQ0lLQ1NCb1pXbG5hSFE5SWpJd2NIZ2lJSFpwWlhkQ2IzZzlJ
akFnTUNBeU1DQXlNQ0lnWlc1aFlteGxMV0poWTJ0bmNtOTFibVE5SW01bGR5QXdJREFnTWpB
Z01qQWlJSGh0YkRwemNHRmpaVDBpY0hKbGMyVnlkbVVpUGdvOFp5QnBaRDBpYkdsdVpTSStD
Z2s4Y0dGMGFDQmtQU0pOTXk0NE1URXNNVFF1TVRBM2RqSXVPRGc1U0RBdU9EUTBkaTB5TGpn
NE9VZ3pMamd4TVhvZ1RUQXVPRFEwTERndU5UVTFkakl1T0RnMmFESXVPVFkzVmpndU5UVTFT
REF1T0RRMGVpQk5NVGt1TVRVMUxERXhMalEwTVZZNExqVTFOVWcyTGpFMk9YWXlMamc0Tmtn
eE9TNHhOVFY2Q2drSklFMHhPUzR4TlRVc01UWXVPVGsyZGkweUxqZzRPVWcyTGpFMk9YWXlM
amc0T1VneE9TNHhOVFY2SUUwd0xqZzBOQ3d6ZGpJdU9EZzVhREl1T1RZM1ZqTklNQzQ0TkRS
NklFMHhPUzR4TlRVc05TNDRPRGxXTTBnMkxqRTJPWFl5TGpnNE9VZ3hPUzR4TlRWNklpOCtD
and2Wno0S1BDOXpkbWMrQ2c9PSIpOwp9Cgo8L3N0eWxlPgpDU1M7CgllY2hvICRvdXQ7Cn0K
CmZ1bmN0aW9uIHRvbV9pbWFnZV9ncmlkX2pzKCkKewogICAgJG91dCA9IDw8PEpTCgo8c2Ny
aXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ci8qCioqIEpTIGZvciB0b21faW1hZ2VfZ3Jp
ZCBwbHVnaW4KKiogQnkgU2FjcmlwYW50IOKAlCBUaG9tYXMgSnVuZAoqKiBodHRwOi8vc2Fj
cmlwYW50LmZyCiovCgokKGZ1bmN0aW9uKCkgewogICAgdmFyIGltYWdlRGlzcGxheU9wdGlv
biA9ICQoIiN0b21faWdfb3B0aW9ucyIpCiAgICAsICAgcmFkaW9zID0gJCgnaW5wdXQnLCBp
bWFnZURpc3BsYXlPcHRpb24pCiAgICAsICAgbGlzdHRhYmxlcyA9ICQoJy50eHAtbGlzdHRh
YmxlcycpCiAgICAvKiwgICBpbWFnZXNUciA9ICQoJ3RyJywgbGlzdHRhYmxlcykqLwogICAg
LCAgIGNvb2tpZSA9ICd0b21faW1hZ2VfZ3JpZCcKICAgICwgICBjb29raWVWYWx1ZSA9IGdl
dENvb2tpZShjb29raWUpCiAgICAsICAgbm9UaHVtYiA9ICQoJ3RkLnRodW1ibmFpbCBhOm5v
dCg6aGFzKGltZykpJywgbGlzdHRhYmxlcykKICAgIDsKCgogICAgLy8gQWRkIC5uby10aHVt
YiBjbGFzcwogICAgbm9UaHVtYi5hZGRDbGFzcygndG9tX2lnLS1ub1RodW1iJykKCiAgICAv
LyBBZGQgcmFkaW9zIGluIHRhYgogICAgaW1hZ2VEaXNwbGF5T3B0aW9uLnByZXBlbmRUbyhs
aXN0dGFibGVzKTsKCgogICAgLy8gQ2hhbmdlIExheW91dCB3aGVuIHJhZGlvIGNoZWNrZWQK
ICAgIHJhZGlvcy5jaGFuZ2UoZnVuY3Rpb24oZXZlbnQpCiAgICB7CiAgICAgICAgaWYgKCB0
aGlzLmlkID09PSAidG9tX2lnX29wdGlvbi0tZ3JpZCIpCiAgICAgICAgewogICAgICAgICAg
ICAkKCdib2R5JykuYWRkQ2xhc3MoJ3RvbV9pZycpOwogICAgICAgICAgICBzZXRDb29raWUo
Y29va2llLCAndG9tX2lnX29wdGlvbi0tZ3JpZCcpOwogICAgICAgIH0KICAgICAgICBlbHNl
CiAgICAgICAgewogICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3RvbV9pZycp
OwogICAgICAgICAgICBzZXRDb29raWUoY29va2llLCAndG9tX2lnX29wdGlvbi0tbGluZScp
CiAgICAgICAgfQoKICAgICAgICByYWRpb3MucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ3NlbGVj
dGVkJyk7CiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTsK
ICAgIH0pOwoKICAgIC8vIENoZWNrICYgY3JlYXRlIGNvb2tpZQogICAgaWYgKCBjb29raWVW
YWx1ZSApCiAgICB7CiAgICAgICAgdmFyIHRhcmdldFJhZGlvID0gZG9jdW1lbnQuZ2V0RWxl
bWVudEJ5SWQoY29va2llVmFsdWUpOwogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHZh
ciB0YXJnZXRSYWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b21faWdfb3B0aW9u
LS1saW5lJyk7CiAgICAgICAgc2V0Q29va2llKGNvb2tpZSwgJ3RvbV9pZ19vcHRpb24tLWxp
bmUnKQogICAgfTsKCiAgICAkKHRhcmdldFJhZGlvKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSku
dHJpZ2dlcigiY2hhbmdlIik7Cn0pOwo8L3NjcmlwdD4KCkpTOwogICAgZWNobyAkb3V0Owp9
IjtzOjM6Im1kNSI7czozMjoiYzA4NzY3M2EzNGJkOWE2OWEyMTY0OWQzODJhMmM4ZWMiO30=
